{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\nmtuc\\\\Desktop\\\\Dev\\\\web\\\\localsonly\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"C:\\\\Users\\\\nmtuc\\\\Desktop\\\\Dev\\\\web\\\\localsonly\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\nmtuc\\\\Desktop\\\\Dev\\\\web\\\\localsonly\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\nmtuc\\\\Desktop\\\\Dev\\\\web\\\\localsonly\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\nmtuc\\\\Desktop\\\\Dev\\\\web\\\\localsonly\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\nmtuc\\\\Desktop\\\\Dev\\\\web\\\\localsonly\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\nmtuc\\\\Desktop\\\\Dev\\\\web\\\\localsonly\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\nmtuc\\\\Desktop\\\\Dev\\\\web\\\\localsonly\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\nmtuc\\\\Desktop\\\\Dev\\\\web\\\\localsonly\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\nmtuc\\\\Desktop\\\\Dev\\\\web\\\\localsonly\\\\client\\\\src\\\\Components\\\\Search.jsx\";\nimport { geolocated } from \"react-geolocated\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { withRouter } from \"react-router\";\nimport './Search.scss';\n\nvar IOM = require('./LocalsOnly.png');\n\nvar reverse = new require('reverse-geocode');\n\nvar Search = /*#__PURE__*/function (_Component) {\n  _inherits(Search, _Component);\n\n  function Search(props) {\n    var _this;\n\n    _classCallCheck(this, Search);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Search).call(this, props));\n    _this.state = {\n      what: \"\",\n      where: \"\",\n      city: '',\n      state: '',\n      zip: ''\n    };\n    _this.handleInput = _this.handleInput.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.componentDidMount = _this.componentDidMount.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.getLocation = _this.getLocation.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Search, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.getLocation().then(function (loc) {\n        var rev = reverse.lookup(loc.lat, loc.lng, 'us');\n\n        _this2.setState({\n          city: rev.city,\n          state: rev.state,\n          zip: rev.zipcode\n        });\n      }).catch(function (err) {\n        console.log(\"No location\");\n      });\n    }\n  }, {\n    key: \"getLocation\",\n    value: function () {\n      var _getLocation = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(callback) {\n        var promise;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                promise = new Promise(function (resolve, reject) {\n                  if (navigator.geolocation) {\n                    navigator.geolocation.getCurrentPosition(function (position) {\n                      resolve({\n                        lat: position.coords.latitude,\n                        lng: position.coords.longitude\n                      });\n                    });\n                  } else {\n                    reject({\n                      lat: 33.597332,\n                      lng: -117.194943\n                    });\n                  }\n                });\n                return _context.abrupt(\"return\", promise);\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getLocation(_x) {\n        return _getLocation.apply(this, arguments);\n      }\n\n      return getLocation;\n    }()\n  }, {\n    key: \"handleInput\",\n    value: function handleInput(event) {\n      var target = event.target;\n      this.setState(_defineProperty({}, target.name, target.value));\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(event) {\n      event.preventDefault();\n      console.log(\"Submit button is pressed\");\n\n      if (this.state.city !== '') {\n        console.log(\"inside if statement: \".concat(this.state.city));\n        if (this.state.what !== '' && this.state.where !== '') this.props.history.push(\"/search?what=\".concat(this.state.what, \"&where=\").concat(this.state.where));else if (this.state.what !== '' && this.state.where === '') this.props.history.push(\"/search?what=\".concat(this.state.what, \"&where=\").concat(this.state.zip));else if (this.state.what === '' && this.state.where !== '') this.props.history.push(\"/search?what=all&where=\".concat(this.state.where));else this.props.history.push(\"search?what=all&where=\".concat(this.state.zip));\n        this.forceUpdate();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"nav\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: IOM,\n        alt: \"locals-only\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 26\n        }\n      })), /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"field\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"control what\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        placeholder: \"What to do?\",\n        type: \"text\",\n        name: \"what\",\n        className: \"input\",\n        value: this.state.what,\n        onChange: this.handleInput,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 19\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"control where\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        placeholder: \"Where at?\",\n        type: \"text\",\n        name: \"where\",\n        className: \"input\",\n        value: this.state.where,\n        onChange: this.handleInput,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 19\n        }\n      })), /*#__PURE__*/React.createElement(\"input\", {\n        className: \"button is-primary search\",\n        type: \"submit\",\n        value: \"Search\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 17\n        }\n      }))), /*#__PURE__*/React.createElement(Link, {\n        className: \"button is-primary create\",\n        to: \"/create-local\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 15\n        }\n      }, \"Localize it!\")));\n    }\n  }]);\n\n  return Search;\n}(Component);\n\nexport default geolocated({\n  positionOptions: {\n    enableHighAccuracy: false\n  },\n  userDecisionTimeout: 5000\n})(withRouter(Search));","map":{"version":3,"sources":["C:/Users/nmtuc/Desktop/Dev/web/localsonly/client/src/Components/Search.jsx"],"names":["geolocated","React","Component","Link","withRouter","IOM","require","reverse","Search","props","state","what","where","city","zip","handleInput","bind","handleSubmit","componentDidMount","getLocation","then","loc","rev","lookup","lat","lng","setState","zipcode","catch","err","console","log","callback","promise","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","event","target","name","value","preventDefault","history","push","forceUpdate","positionOptions","enableHighAccuracy","userDecisionTimeout"],"mappings":"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","sourcesContent":["import { geolocated } from \"react-geolocated\";\r\n\r\nimport React, { Component } from 'react'\r\nimport {Link} from 'react-router-dom';\r\nimport { withRouter } from \"react-router\";\r\nimport './Search.scss'\r\nconst IOM = require('./LocalsOnly.png');\r\nconst reverse = new require('reverse-geocode')\r\n\r\n\r\nclass Search extends Component {\r\n  \r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n          what: \"\", \r\n          where: \"\",\r\n          city:'',\r\n          state: '',\r\n          zip: ''\r\n        };\r\n    \r\n        this.handleInput = this.handleInput.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.componentDidMount = this.componentDidMount.bind(this);\r\n        this.getLocation = this.getLocation.bind(this);\r\n      }\r\n\r\n      componentDidMount() {\r\n        this.getLocation()\r\n        .then((loc)=>{ \r\n          const rev = reverse.lookup(loc.lat, loc.lng, 'us');\r\n          this.setState({\r\n            city:rev.city,\r\n            state: rev.state,\r\n            zip: rev.zipcode,\r\n          })\r\n        })\r\n        .catch(function(err) { console.log(\"No location\"); });\r\n        \r\n      }\r\n      \r\n      async getLocation(callback){\r\n        var promise = new Promise((resolve, reject)=>{\r\n            if (navigator.geolocation) {\r\n                navigator.geolocation.getCurrentPosition(\r\n                  (position)=>{\r\n                      resolve({lat:position.coords.latitude ,lng:position.coords.longitude})\r\n                  }\r\n                );\r\n            } else {\r\n              reject({lat:33.597332, lng:-117.194943});\r\n            }\r\n        });\r\n    \r\n        return promise;\r\n    }\r\n      handleInput(event){\r\n        const target = event.target;\r\n        this.setState({\r\n          [target.name]: target.value\r\n        });\r\n      }\r\n    \r\n      handleSubmit(event){\r\n        event.preventDefault();\r\n        console.log(\"Submit button is pressed\");\r\n        \r\n        if(this.state.city !== ''){\r\n          console.log(`inside if statement: ${this.state.city}`);\r\n          \r\n          if (this.state.what !== '' && this.state.where !== '') \r\n            this.props.history.push(`/search?what=${this.state.what}&where=${this.state.where}`);\r\n          else if (this.state.what !== '' && this.state.where === '') \r\n            this.props.history.push(`/search?what=${this.state.what}&where=${this.state.zip}`);\r\n          else if(this.state.what === '' && this.state.where !== '')  \r\n            this.props.history.push(`/search?what=all&where=${this.state.where}`);\r\n          else                                                        \r\n            this.props.history.push(`search?what=all&where=${this.state.zip}`);\r\n            \r\n          this.forceUpdate();\r\n        }\r\n        \r\n      }\r\n      \r\n    render() {\r\n     \r\n        return (\r\n          <nav>\r\n            <Link to='/'><img src={IOM} alt=\"locals-only\"/></Link>\r\n            <form onSubmit={this.handleSubmit}>\r\n              <div className=\"field\">\r\n                <div className=\"control what\">\r\n                  <input \r\n                    placeholder=\"What to do?\" \r\n                    type=\"text\" \r\n                    name=\"what\"\r\n                    className=\"input\" \r\n                    value={this.state.what} \r\n                    onChange={this.handleInput}\r\n                  />\r\n                </div>\r\n                <div className=\"control where\">\r\n                  <input \r\n                    placeholder=\"Where at?\"\r\n                    type=\"text\" \r\n                    name=\"where\"\r\n                    className=\"input\" \r\n                    value={this.state.where} \r\n                    onChange={this.handleInput}\r\n                  />\r\n                </div>\r\n                \r\n                <input className=\"button is-primary search\" type=\"submit\" value=\"Search\"/>\r\n              </div>\r\n            </form>\r\n            <Link className=\"button is-primary create\" to=\"/create-local\" > \r\n              <i>Localize it!</i>\r\n            </Link>\r\n          </nav>\r\n        )\r\n    }\r\n}\r\n\r\nexport default geolocated({\r\n  positionOptions: {\r\n      enableHighAccuracy: false,\r\n  },\r\n  userDecisionTimeout: 5000,\r\n})(withRouter(Search));\r\n"]},"metadata":{},"sourceType":"module"}