{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\nmtuc\\\\Desktop\\\\Dev\\\\web\\\\localsonly\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\nmtuc\\\\Desktop\\\\Dev\\\\web\\\\localsonly\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _createSuper from\"C:\\\\Users\\\\nmtuc\\\\Desktop\\\\Dev\\\\web\\\\localsonly\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import _inherits from\"C:\\\\Users\\\\nmtuc\\\\Desktop\\\\Dev\\\\web\\\\localsonly\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import axios from'axios';import{DB}from'../../globals';import ResultsCard from'../../Components/ResultsCard';import'./results.scss';import queryString from'query-string';import ClimbingBoxLoader from\"react-spinners/ClimbingBoxLoader\";var Results=/*#__PURE__*/function(_Component){_inherits(Results,_Component);var _super=_createSuper(Results);function Results(props){var _this;_classCallCheck(this,Results);_this=_super.call(this,props);_this.state={what:[],where:[],items:[],loading:true};return _this;}_createClass(Results,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var values=queryString.parse(this.props.location.search);console.log(values);this.setState({what:values.what,where:values.where},function(){_this2.getData();});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){var values=queryString.parse(this.props.location.search);if(this.state.what!==values.what||this.state.where!==values.where){this.setState({what:values.what,where:values.where,loading:true});window.location.reload();}}},{key:\"getData\",value:function getData(){var _this3=this;if(this.state.where===\"currentZip\"&&this.state.what===\"all\"){axios.get(\"\".concat(DB)).then(function(res){console.log(\"Postal courier has delivered your package!\");var data=res.data;_this3.setState({items:data,loading:false});}).catch(function(){console.log(\"Postal courier has vanished!\");});}//     if (this.state.what !== '' && this.state.where !== '') \n//   this.props.history.push( `/search?what=${this.state.what}&where=${this.state.where}`);\n// else if (this.state.what !== '' && this.state.where === '') \n//   this.props.history.push(`/search?what=${this.state.what}&where=currentZip`);\n// else if(this.state.what === '' && this.state.where !== '')  \n//   this.props.history.push( `/search?what=all&where=${this.state.where}`);\n// else                                                        \n//   this.props.history.push( \"search?what=all&where=currentZip\");\n}},{key:\"displayItems\",value:function displayItems(posts){if(!posts.length)return/*#__PURE__*/React.createElement(\"div\",null,\"Nothing to see here\");else return posts.map(function(post,index){return/*#__PURE__*/React.createElement(ResultsCard,{key:index,id:post._id,name:post.name,description:post.description,rating:post.rating,reviewCount:post.reviewCount,image:undefined});});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"results\"},this.state.loading?/*#__PURE__*/React.createElement(\"div\",{className:\"loading\"},/*#__PURE__*/React.createElement(ClimbingBoxLoader,{size:30,color:\"#000000\",loading:this.state.loading}),/*#__PURE__*/React.createElement(\"p\",null,\"Loading up good stuff\")):this.displayItems(this.state.items));}}]);return Results;}(Component);export{Results as default};","map":{"version":3,"sources":["C:/Users/nmtuc/Desktop/Dev/web/localsonly/frontend/src/Pages/Results/Results.jsx"],"names":["React","Component","axios","DB","ResultsCard","queryString","ClimbingBoxLoader","Results","props","state","what","where","items","loading","values","parse","location","search","console","log","setState","getData","window","reload","get","then","res","data","catch","posts","length","map","post","index","_id","name","description","rating","reviewCount","undefined","displayItems"],"mappings":"osBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,EAAR,KAAiB,eAAjB,CACA,MAAOC,CAAAA,WAAP,KAAwB,8BAAxB,CACA,MAAO,gBAAP,CACA,MAAOC,CAAAA,WAAP,KAAwB,cAAxB,CACA,MAAOC,CAAAA,iBAAP,KACK,kCADL,C,GAGqBC,CAAAA,O,kGACjB,iBAAYC,KAAZ,CAAkB,yCAEd,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CACTC,IAAI,CAAE,EADG,CAETC,KAAK,CAAE,EAFE,CAGTC,KAAK,CAAE,EAHE,CAITC,OAAO,CAAE,IAJA,CAAb,CAHc,aAUjB,C,iFAEkB,iBACf,GAAIC,CAAAA,MAAM,CAAGT,WAAW,CAACU,KAAZ,CAAkB,KAAKP,KAAL,CAAWQ,QAAX,CAAoBC,MAAtC,CAAb,CACAC,OAAO,CAACC,GAAR,CAAYL,MAAZ,EAEA,KAAKM,QAAL,CAAc,CACNV,IAAI,CAACI,MAAM,CAACJ,IADN,CAENC,KAAK,CAACG,MAAM,CAACH,KAFP,CAAd,CAIA,UAAI,CAAE,MAAI,CAACU,OAAL,GAAgB,CAJtB,EAQH,C,+DACmB,CAChB,GAAIP,CAAAA,MAAM,CAAGT,WAAW,CAACU,KAAZ,CAAkB,KAAKP,KAAL,CAAWQ,QAAX,CAAoBC,MAAtC,CAAb,CACA,GAAG,KAAKR,KAAL,CAAWC,IAAX,GAAoBI,MAAM,CAACJ,IAA3B,EAAmC,KAAKD,KAAL,CAAWE,KAAX,GAAqBG,MAAM,CAACH,KAAlE,CAAwE,CACpE,KAAKS,QAAL,CAAc,CACNV,IAAI,CAACI,MAAM,CAACJ,IADN,CAENC,KAAK,CAACG,MAAM,CAACH,KAFP,CAGNE,OAAO,CAAC,IAHF,CAAd,EAMAS,MAAM,CAACN,QAAP,CAAgBO,MAAhB,GACH,CACJ,C,yCACQ,iBACD,GAAG,KAAKd,KAAL,CAAWE,KAAX,GAAqB,YAArB,EAAqC,KAAKF,KAAL,CAAWC,IAAX,GAAoB,KAA5D,CAAkE,CAC9DR,KAAK,CAACsB,GAAN,WAAarB,EAAb,GACKsB,IADL,CACU,SAACC,GAAD,CAAO,CACLR,OAAO,CAACC,GAAR,CAAY,4CAAZ,EACA,GAAMQ,CAAAA,IAAI,CAAGD,GAAG,CAACC,IAAjB,CACA,MAAI,CAACP,QAAL,CAAc,CAAER,KAAK,CAACe,IAAR,CAAcd,OAAO,CAAE,KAAvB,CAAd,EACH,CALT,EAOKe,KAPL,CAOW,UAAI,CAACV,OAAO,CAACC,GAAR,CAAY,8BAAZ,EAA6C,CAP7D,EAQH,CAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,C,kDACYU,K,CAAM,CACf,GAAG,CAACA,KAAK,CAACC,MAAV,CACI,mBAAO,qDAAP,CADJ,IAGI,OAAOD,CAAAA,KAAK,CAACE,GAAN,CAAU,SAACC,IAAD,CAAOC,KAAP,qBACjB,oBAAC,WAAD,EACI,GAAG,CAAEA,KADT,CAEI,EAAE,CAAED,IAAI,CAACE,GAFb,CAGI,IAAI,CAAEF,IAAI,CAACG,IAHf,CAII,WAAW,CAAEH,IAAI,CAACI,WAJtB,CAKI,MAAM,CAAEJ,IAAI,CAACK,MALjB,CAMI,WAAW,CAAEL,IAAI,CAACM,WANtB,CAOI,KAAK,CAAEC,SAPX,EADiB,EAAV,CAAP,CAWP,C,uCAEQ,CAEL,mBAEI,2BAAK,SAAS,CAAC,SAAf,EACK,KAAK9B,KAAL,CAAWI,OAAX,cAAoB,2BAAK,SAAS,CAAC,SAAf,eACjB,oBAAC,iBAAD,EACI,IAAI,CAAE,EADV,CAEI,KAAK,CAAE,SAFX,CAGI,OAAO,CAAE,KAAKJ,KAAL,CAAWI,OAHxB,EADiB,cAMjB,qDANiB,CAApB,CAQD,KAAK2B,YAAL,CAAkB,KAAK/B,KAAL,CAAWG,KAA7B,CATJ,CAFJ,CAeH,C,qBA7FgCX,S,SAAhBM,O","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport {DB} from '../../globals';\r\nimport ResultsCard from '../../Components/ResultsCard';\r\nimport './results.scss';\r\nimport queryString from 'query-string';\r\nimport ClimbingBoxLoader\r\nfrom \"react-spinners/ClimbingBoxLoader\";\r\n\r\nexport default class Results extends Component {\r\n    constructor(props){\r\n        \r\n        super(props);\r\n        this.state = {\r\n            what: [],\r\n            where: [],\r\n            items: [],\r\n            loading: true,\r\n            \r\n        }\r\n    }\r\n    \r\n    componentDidMount(){\r\n        let values = queryString.parse(this.props.location.search);\r\n        console.log(values);\r\n        \r\n        this.setState({ \r\n                what:values.what,\r\n                where:values.where \r\n            },\r\n        ()=>{ this.getData();})\r\n        \r\n       \r\n        \r\n    }\r\n    componentDidUpdate(){\r\n        let values = queryString.parse(this.props.location.search);\r\n        if(this.state.what !== values.what || this.state.where !== values.where){\r\n            this.setState({ \r\n                    what:values.what,\r\n                    where:values.where,\r\n                    loading:true\r\n                }\r\n            )\r\n            window.location.reload();\r\n        }\r\n    }\r\n    getData(){\r\n            if(this.state.where === \"currentZip\" && this.state.what === \"all\"){\r\n                axios.get(`${DB}`)\r\n                    .then((res)=>{\r\n                            console.log(\"Postal courier has delivered your package!\");\r\n                            const data = res.data;\r\n                            this.setState({ items:data, loading: false });\r\n                        }\r\n                    )\r\n                    .catch(()=>{console.log(\"Postal courier has vanished!\");});\r\n            }\r\n            \r\n        //     if (this.state.what !== '' && this.state.where !== '') \r\n        //   this.props.history.push( `/search?what=${this.state.what}&where=${this.state.where}`);\r\n        // else if (this.state.what !== '' && this.state.where === '') \r\n        //   this.props.history.push(`/search?what=${this.state.what}&where=currentZip`);\r\n        // else if(this.state.what === '' && this.state.where !== '')  \r\n        //   this.props.history.push( `/search?what=all&where=${this.state.where}`);\r\n        // else                                                        \r\n        //   this.props.history.push( \"search?what=all&where=currentZip\");\r\n    }\r\n    displayItems(posts){\r\n        if(!posts.length) \r\n            return <div>Nothing to see here</div>;\r\n        else\r\n            return posts.map((post, index)=>(\r\n            <ResultsCard \r\n                key={index}\r\n                id={post._id}\r\n                name={post.name} \r\n                description={post.description}\r\n                rating={post.rating}\r\n                reviewCount={post.reviewCount}\r\n                image={undefined}\r\n                />\r\n            ));\r\n    }\r\n   \r\n    render() {\r\n        \r\n        return (\r\n            \r\n            <div className=\"results\">\r\n                {this.state.loading? <div className=\"loading\">\r\n                    <ClimbingBoxLoader\r\n                        size={30}\r\n                        color={\"#000000\"}\r\n                        loading={this.state.loading}\r\n                    />\r\n                    <p>Loading up good stuff</p>\r\n                </div>:\r\n                this.displayItems(this.state.items)}\r\n            </div>\r\n            \r\n        )\r\n    }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}