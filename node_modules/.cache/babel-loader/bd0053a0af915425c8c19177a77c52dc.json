{"ast":null,"code":"const haversine = require('./haversine');\n/**\n * iterates over locations to find closest location to given input lat-long values\n * @param  {Number} latitude  latitude value\n * @param  {Number} longitude longitude value\n * @param  {String} countryCode Country Code. Should exist in /locations/{countryCode}.json\n * @return {Object}           city data in an object\n */\n\n\nfunction lookup(latitude, longitude, countryCode) {\n  let minDistance = Infinity;\n  let city = {}; // start with inout values\n\n  const start = {\n    latitude,\n    longitude\n  }; // iterate through all locations\n\n  try {\n    const otherCountryOrigin = require(`../locations/${countryCode.toUpperCase()}.json`);\n\n    otherCountryOrigin.forEach(location => {\n      const distance = haversine.distance(start, location);\n\n      if (distance < minDistance) {\n        city = location;\n        minDistance = distance;\n      }\n    });\n  } catch (e) {\n    return undefined;\n  } // add distance to city object\n\n\n  city.distance = minDistance; // return city object\n\n  return city;\n}\n\nmodule.exports.lookup = lookup;","map":null,"metadata":{},"sourceType":"script"}