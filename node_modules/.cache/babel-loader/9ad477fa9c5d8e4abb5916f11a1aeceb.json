{"ast":null,"code":"// inspired from package haversine originally By Nick Justice (niix) at https://github.com/niix/haversine\n\n/**\n * converts a number to radian value\n * @param {number} num a number\n */\nfunction toRadian(num) {\n  return num * Math.PI / 180;\n}\n/**\n * finds the distance between two lat-long values\n * @param {object} start start lat-long\n * @param {object} end end lat-long\n * @param {object} options any options\n */\n\n\nfunction distance(start, end, options = {}) {\n  // init constants\n  const km = 6371;\n  const mile = 3960; // convert everything to radians\n\n  const R = options.unit === 'mile' ? mile : km;\n  const dLat = toRadian(end.latitude - start.latitude);\n  const dLon = toRadian(end.longitude - start.longitude);\n  const lat1 = toRadian(start.latitude);\n  const lat2 = toRadian(end.latitude);\n  const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.sin(dLon / 2) * Math.sin(dLon / 2) * Math.cos(lat1) * Math.cos(lat2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  let distanceValue = 0;\n\n  if (options.threshold) {\n    distanceValue = options.threshold > R * c;\n  } else {\n    distanceValue = R * c;\n  }\n\n  return distanceValue;\n}\n\nmodule.exports.distance = distance;","map":null,"metadata":{},"sourceType":"script"}