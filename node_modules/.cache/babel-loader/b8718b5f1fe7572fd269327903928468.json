{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\nmtuc\\\\Desktop\\\\Dev\\\\web\\\\localsonly\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"C:\\\\Users\\\\nmtuc\\\\Desktop\\\\Dev\\\\web\\\\localsonly\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\nmtuc\\\\Desktop\\\\Dev\\\\web\\\\localsonly\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Users\\\\nmtuc\\\\Desktop\\\\Dev\\\\web\\\\localsonly\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\nmtuc\\\\Desktop\\\\Dev\\\\web\\\\localsonly\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\nmtuc\\\\Desktop\\\\Dev\\\\web\\\\localsonly\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _createSuper from\"C:\\\\Users\\\\nmtuc\\\\Desktop\\\\Dev\\\\web\\\\localsonly\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import _inherits from\"C:\\\\Users\\\\nmtuc\\\\Desktop\\\\Dev\\\\web\\\\localsonly\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import{geolocated}from\"react-geolocated\";import React,{Component}from'react';import{Link}from'react-router-dom';import{withRouter}from\"react-router\";import'./Search.scss';var IOM=require('./LocalsOnly.png');var reverse=new require('reverse-geocode');// const NodeGeocoder = require('node-geocoder');\n// const options = {\n//   provider:'google',\n//   fetch: async (res)=>{console.log(res);},\n//   apiKey: \"AIzaSyDOZ6d6M5cnuKqBL4IyYXKu7TU_Rt-POFw\",\n//   formatter:null\n// }\n// const geocoder = NodeGeocoder(options);\n// const res = await geocoder.geocode('1150 W. University Dr., Tempe Az');\nvar Search=/*#__PURE__*/function(_Component){_inherits(Search,_Component);var _super=_createSuper(Search);function Search(props){var _this;_classCallCheck(this,Search);_this=_super.call(this,props);_this.state={what:\"\",where:\"\",city:'',state:'',zip:''};_this.handleInput=_this.handleInput.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));_this.componentDidMount=_this.componentDidMount.bind(_assertThisInitialized(_this));_this.getLocation=_this.getLocation.bind(_assertThisInitialized(_this));return _this;}_createClass(Search,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.getLocation().then(function(loc){var rev=reverse.lookup(loc.lat,loc.lng,'us');_this2.setState({city:rev.city,state:rev.state,zip:rev.zipcode});}).catch(function(err){console.log(\"No location\");});}},{key:\"getLocation\",value:function(){var _getLocation=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(callback){var promise;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:promise=new Promise(function(resolve,reject){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(position){resolve({lat:position.coords.latitude,lng:position.coords.longitude});});}else{reject({lat:33.597332,lng:-117.194943});}});return _context.abrupt(\"return\",promise);case 2:case\"end\":return _context.stop();}}},_callee);}));function getLocation(_x){return _getLocation.apply(this,arguments);}return getLocation;}()},{key:\"handleInput\",value:function handleInput(event){var target=event.target;this.setState(_defineProperty({},target.name,target.value));}},{key:\"handleSubmit\",value:function handleSubmit(event){event.preventDefault();if(this.state.city!==''){if(this.state.what!==''&&this.state.where!=='')this.props.history.push(\"/search?what=\".concat(this.state.what,\"&where=\").concat(this.state.where));else if(this.state.what!==''&&this.state.where==='')this.props.history.push(\"/search?what=\".concat(this.state.what,\"&where=\").concat(this.state.zip));else if(this.state.what===''&&this.state.where!=='')this.props.history.push(\"/search?what=all&where=\".concat(this.state.where));else this.props.history.push(\"search?what=all&where=\".concat(this.state.zip));this.forceUpdate();}}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"nav\",null,/*#__PURE__*/React.createElement(Link,{to:\"/\"},/*#__PURE__*/React.createElement(\"img\",{src:IOM,alt:\"locals-only\"})),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"field\"},/*#__PURE__*/React.createElement(\"div\",{className:\"control what\"},/*#__PURE__*/React.createElement(\"input\",{placeholder:\"What to do?\",type:\"text\",name:\"what\",className:\"input\",value:this.state.what,onChange:this.handleInput})),/*#__PURE__*/React.createElement(\"div\",{className:\"control where\"},/*#__PURE__*/React.createElement(\"input\",{placeholder:\"Where at?\",type:\"text\",name:\"where\",className:\"input\",value:this.state.where,onChange:this.handleInput})),/*#__PURE__*/React.createElement(\"button\",{className:\"button is-primary search\"},\"Submit\"))),/*#__PURE__*/React.createElement(Link,{className:\"button is-primary create\",to:\"/create-local\"},/*#__PURE__*/React.createElement(\"i\",null,\"Localize it!\")));}}]);return Search;}(Component);export default geolocated({positionOptions:{enableHighAccuracy:false},userDecisionTimeout:5000})(withRouter(Search));","map":{"version":3,"sources":["C:/Users/nmtuc/Desktop/Dev/web/localsonly/client/src/Components/Search.jsx"],"names":["geolocated","React","Component","Link","withRouter","IOM","require","reverse","Search","props","state","what","where","city","zip","handleInput","bind","handleSubmit","componentDidMount","getLocation","then","loc","rev","lookup","lat","lng","setState","zipcode","catch","err","console","log","callback","promise","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","event","target","name","value","preventDefault","history","push","forceUpdate","positionOptions","enableHighAccuracy","userDecisionTimeout"],"mappings":"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","sourcesContent":["import { geolocated } from \"react-geolocated\";\r\n\r\nimport React, { Component } from 'react'\r\nimport {Link} from 'react-router-dom';\r\nimport { withRouter } from \"react-router\";\r\nimport './Search.scss'\r\nconst IOM = require('./LocalsOnly.png');\r\nconst reverse = new require('reverse-geocode')\r\n\r\n// const NodeGeocoder = require('node-geocoder');\r\n// const options = {\r\n//   provider:'google',\r\n//   fetch: async (res)=>{console.log(res);},\r\n//   apiKey: \"AIzaSyDOZ6d6M5cnuKqBL4IyYXKu7TU_Rt-POFw\",\r\n//   formatter:null\r\n// }\r\n// const geocoder = NodeGeocoder(options);\r\n// const res = await geocoder.geocode('1150 W. University Dr., Tempe Az');\r\n\r\n\r\n\r\n\r\n\r\nclass Search extends Component {\r\n  \r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n          what: \"\", \r\n          where: \"\",\r\n          city:'',\r\n          state: '',\r\n          zip: ''\r\n        };\r\n    \r\n        this.handleInput = this.handleInput.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.componentDidMount = this.componentDidMount.bind(this);\r\n        this.getLocation = this.getLocation.bind(this);\r\n      }\r\n\r\n      componentDidMount() {\r\n        this.getLocation()\r\n        .then((loc)=>{ \r\n          const rev = reverse.lookup(loc.lat, loc.lng, 'us');\r\n          this.setState({\r\n            city:rev.city,\r\n            state: rev.state,\r\n            zip: rev.zipcode,\r\n          })\r\n        })\r\n        .catch(function(err) { console.log(\"No location\"); });\r\n        \r\n      }\r\n      \r\n      async getLocation(callback){\r\n        var promise = new Promise((resolve, reject)=>{\r\n            if (navigator.geolocation) {\r\n                navigator.geolocation.getCurrentPosition(\r\n                  (position)=>{\r\n                      resolve({lat:position.coords.latitude ,lng:position.coords.longitude})\r\n                  }\r\n                );\r\n            } else {\r\n              reject({lat:33.597332, lng:-117.194943});\r\n            }\r\n        });\r\n    \r\n        return promise;\r\n    }\r\n      handleInput(event){\r\n        const target = event.target;\r\n        this.setState({\r\n          [target.name]: target.value\r\n        });\r\n      }\r\n    \r\n      handleSubmit(event){\r\n        event.preventDefault();\r\n        \r\n        if(this.state.city !== ''){\r\n          if (this.state.what !== '' && this.state.where !== '') \r\n            this.props.history.push(`/search?what=${this.state.what}&where=${this.state.where}`);\r\n          else if (this.state.what !== '' && this.state.where === '') \r\n            this.props.history.push(`/search?what=${this.state.what}&where=${this.state.zip}`);\r\n          else if(this.state.what === '' && this.state.where !== '')  \r\n            this.props.history.push(`/search?what=all&where=${this.state.where}`);\r\n          else                                                        \r\n            this.props.history.push(`search?what=all&where=${this.state.zip}`);\r\n            \r\n          this.forceUpdate();\r\n        }\r\n        \r\n      }\r\n      \r\n    render() {\r\n     \r\n        return (\r\n          <nav>\r\n            <Link to='/'><img src={IOM} alt=\"locals-only\"/></Link>\r\n            <form onSubmit={this.handleSubmit}>\r\n              <div className=\"field\">\r\n                <div className=\"control what\">\r\n                  <input \r\n                    placeholder=\"What to do?\" \r\n                    type=\"text\" \r\n                    name=\"what\"\r\n                    className=\"input\" \r\n                    value={this.state.what} \r\n                    onChange={this.handleInput}\r\n                  />\r\n                </div>\r\n                <div className=\"control where\">\r\n                  <input \r\n                    placeholder=\"Where at?\"\r\n                    type=\"text\" \r\n                    name=\"where\"\r\n                    className=\"input\" \r\n                    value={this.state.where} \r\n                    onChange={this.handleInput}\r\n                  />\r\n                </div>\r\n                \r\n                <button className=\"button is-primary search\">Submit</button>\r\n              </div>\r\n            </form>\r\n            <Link className=\"button is-primary create\" to=\"/create-local\" > \r\n              <i>Localize it!</i>\r\n            </Link>\r\n          </nav>\r\n        )\r\n    }\r\n}\r\n\r\nexport default geolocated({\r\n  positionOptions: {\r\n      enableHighAccuracy: false,\r\n  },\r\n  userDecisionTimeout: 5000,\r\n})(withRouter(Search));\r\n"]},"metadata":{},"sourceType":"module"}