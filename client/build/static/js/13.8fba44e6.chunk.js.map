{"version":3,"sources":["Components/Picture.jsx","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","Components/UserTag.jsx","Pages/Profile.jsx"],"names":["Picture","id","publicId","_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","Object","from","unsupportedIterableToArray","TypeError","DevTag","className","BetaTag","PremiumTag","CEOTag","UserTag","withUser","user","r","role","console","log","Profile","useState","locals","setLocals","offset","setOffset","limit","getLocals","a","axios","get","ownerID","then","data","after","currentItems","catch","err","error","message","useEffect","dir","DisplayLocals","map","pub","name","images","cloudName","secure","upload_preset","url","preset","description","to","_id","avatar","src","alt","handler","email","localTo","split","state","city","charAt","toUpperCase","slice","formatLocal","onClick","e","preventDefault"],"mappings":"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","file":"static/js/13.8fba44e6.chunk.js","sourcesContent":["import React from 'react'\nimport {Image} from 'cloudinary-react';\n\nconst Picture = ({id}) => {\n    \n    return (\n        <Image publicId={id}></Image>\n    )\n}\n\nexport default Picture;","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import React from 'react';\nimport {withUser} from '../User';\n\nconst DevTag = () => \n<span className=\"ml-1 tag is-info is-light\">\n      <i className=\"fas fa-tools pr-1 mr-1 my-0\"/> <p>Dev</p>\n  </span>\n\n\nconst BetaTag = () => \n<span className=\"tag is-link is-light\">\n      <i className=\"fas fa-flask pr-1 mr-1 my-0\"/> Beta\n</span>\n\n\nconst PremiumTag = () =>\n<span className=\"tag is-warning is-light\">\n<i className=\"fas fa-gem pr-1 mr-1 my-0\"/> Premium\n</span>\n\n\n\nconst CEOTag = () =>\n<span className=\"tag is-danger is-light \">\n<i className=\"fas fa-crown pr-1 mr-1 my-0\"/> <p className=\"content\">Founder</p>\n</span>\n\nconst UserTag = withUser(({user, role})=>{\n  const r = role || user.role;\n  console.log(r);\n  if(r === \"CEO\"){\n    return <CEOTag/>\n  }\n  if(r === \"admin\"){\n    return <DevTag/>\n  }\n  if(r === \"ebet\"){\n    return <BetaTag/>\n  }\n  if(r === \"prem\"){\n    return <PremiumTag/>\n  }\n  return null;\n})\n\nconst UserTagAnimate = ()=>\n<span className=\"animate-tag\">\n  <UserTag/>\n</span>\n\nexport default UserTag\n\nexport {\n  DevTag,\n  BetaTag,\n  PremiumTag,\n  CEOTag,\n  UserTagAnimate\n}","import React, {useState, useEffect} from 'react'\r\nimport { withUser } from '../User'\r\nimport axios from 'axios';\r\nimport Picture from '../Components/Picture';\r\nimport {Link} from 'react-router-dom';\r\nimport { CloudinaryContext} from 'cloudinary-react'\r\nimport UserTag from \"../Components/UserTag\";\r\n\r\nconst Profile = withUser(({user}) => {\r\n    \r\n   \r\n    const [locals, setLocals] = useState([]);\r\n    // const [loading, setLoading] = useState(true)\r\n    const [offset, setOffset] = useState(null);\r\n    const [limit] = useState(10);\r\n\r\n    const getLocals = async ()=>{\r\n        await axios.get(`/api/v1/users/locals?id=${user.ownerID}&limit=${limit}${offset ? `&offset=${offset}` : ''}`)\r\n        .then(({data:{data, after}})=>{\r\n            console.log(after);\r\n            setLocals(currentItems=>[...currentItems, ...data] || null)\r\n            setOffset(after)\r\n        })\r\n        .catch(err=>{\r\n            console.error(err)\r\n            setLocals([{\r\n                message : \"Unable to connect\"\r\n            }])\r\n        })\r\n\r\n        // setLoading(false);\r\n    }\r\n    useEffect(()=>{\r\n        console.log(\"In user profile: \");\r\n        console.dir( user)\r\n        getLocals();\r\n    },[user.ownerID])\r\n\r\n    \r\n    const DisplayLocals = () =>{\r\n        return locals ? locals.map(pub=>\r\n\r\n            <li className=\"box\">\r\n                <h1 className=\"title\">{pub.name}</h1>\r\n                { \r\n                    pub.images && pub.images.data[0]?\r\n                    <CloudinaryContext cloudName={\"dpjlvg7ql\"} secure={false} upload_preset=\"local_images\">\r\n                        <Picture id={pub.images.data[0].url} preset=\"local_images\"/>\r\n                    </CloudinaryContext> :\r\n                    null\r\n                }\r\n                <article className=\"content\">{pub.description}</article>\r\n                <Link to={`local?id=${pub._id}`}>Go to Local</Link>\r\n            </li>\r\n            \r\n            ) : <h1>Loading...</h1>\r\n    }\r\n    const onClickShowMore = e =>{\r\n        e.preventDefault();\r\n        getLocals();\r\n    }\r\n    const formatLocal = ()=>{\r\n        let [state, city] = user.localTo.split(':');\r\n        return city && state ? `${city.charAt(0).toUpperCase() + city.slice(1)}, ${state.toUpperCase()}` : \"unavailable\"\r\n    }\r\n    \r\n    return (\r\n        <main id=\"profile-page\" className=\"section container\">\r\n            \r\n                <article className=\"columns\">\r\n                <section id=\"profile-details\" className=\"column\">\r\n                    <div className=\"media\">\r\n                        <figure className=\"media-left\">\r\n                            <div className=\"image is-128x128\">\r\n                                <Link to={`/dashboard/edit`}>\r\n                                <div className=\"profile-avatar\">\r\n                                    {\r\n                                        user.avatar === null ? <img src=\"https://bulma.io/images/placeholders/128x128.png\" alt=\"User\"/>:\r\n                                        <CloudinaryContext cloudName={\"dpjlvg7ql\"} secure={false} upload_preset=\"avatar_images\">\r\n                                            <Picture id={user.avatar} preset=\"avatar_images\"/>\r\n                                        </CloudinaryContext>\r\n                                    }\r\n                                    <div className=\"edit-avatar\">edit</div>\r\n                                </div>\r\n                                </Link>\r\n                            </div>\r\n                        </figure>\r\n                        <div className=\"media-content\">\r\n                            <h1 className=\"title my-0 py-0\">{user.name} <span></span>\r\n                            <UserTag/>\r\n                            </h1>\r\n                            \r\n                            <h2 className=\"subtitle mt-0 pt-0\">@{user.handler}</h2>\r\n                            \r\n                            <p>Email: {user.email}</p>\r\n                            <p>Local: {formatLocal()}</p>\r\n                        </div>\r\n                    </div>\r\n                   \r\n                    \r\n                </section>\r\n                <section className=\"column level\">\r\n                    <div className=\"level-right\">\r\n                    <Link className=\"button pt-1 level-item\" to={`/dashboard/edit`}>Edit Profile</Link>\r\n                    </div>\r\n                </section>\r\n                \r\n            </article>     \r\n            <section className=\"my-4 profile-local-section\">\r\n                <h1 className=\"title\">Locals</h1>\r\n                <ul className=\"is-flex is-flex-direction-column is-flex-shrink-4\">\r\n                    <DisplayLocals/> \r\n                    {offset && <div className=\"text-has-line my-5 is-clickable\" onClick={onClickShowMore}><span>show more</span></div>}\r\n                </ul>\r\n            </section>\r\n        </main>\r\n    )\r\n})\r\n\r\nexport default Profile;\r\n"],"sourceRoot":""}