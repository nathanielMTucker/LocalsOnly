(this.webpackJsonplocalsonly=this.webpackJsonplocalsonly||[]).push([[12],{119:function(e,t,a){"use strict";a(1);var s=a(117),n=a(0);t.a=function(e){var t=e.id;return Object(n.jsx)(s.b,{publicId:t})}},178:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var s=a(10),n=a.n(s),c=a(18),i=a(129),r=a(6),l=a(1),o=a(119),u=a(117),j=a(22),m=a(0),b=Object(j.c)((function(e){var t=e.user,a=e.setImage,s=e.image,n=function(e){e.images,e.setImages;return Object(m.jsxs)("div",{className:"tile is-child image-item",children:[Object(m.jsx)("span",{className:"is-small button is-inverted is-danger delete-image",title:"Remove",onClick:function(e){a(null)},children:Object(m.jsx)("i",{className:"far fa-trash-alt"})}),Object(m.jsx)("img",{src:URL.createObjectURL(s),alt:"Could not load"})]})};return Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"file is-centered is-boxed has-name",children:Object(m.jsxs)("label",{className:"file-label",children:[Object(m.jsx)("input",{className:"file-input",src:"./LocalsOnly.png",type:"file",name:"images",onChange:function(e){e.preventDefault();var t=e.target.files;console.dir(t[0]),a(t[0])}}),Object(m.jsx)("span",{className:"image is-128x128",children:null===t.avatar?Object(m.jsx)("img",{src:"https://bulma.io/images/placeholders/128x128.png",alt:"User"}):Object(m.jsx)(u.a,{cloudName:"dpjlvg7ql",secure:!1,upload_preset:"avatar_images",children:Object(m.jsx)(o.a,{id:t.avatar,preset:"avatar_images"})})})]})}),s&&Object(m.jsx)(n,{})]})}));t.b=function(e){var t=e.folder,a=e.multiple,s=e.callback,o=Object(l.useState)(!1),u=Object(r.a)(o,2),j=u[0],b=u[1],d=Object(l.useState)([]),p=Object(r.a)(d,2),f=p[0],O=p[1],h=function(){var e=Object(c.a)(n.a.mark((function e(a){var i,r,l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),console.log(f),i=new FormData,b(!0),r=f.map(function(){var e=Object(c.a)(n.a.mark((function e(a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.append("file",a),i.append("upload_preset","".concat(t,"_images")),e.next=4,fetch("https://api.cloudinary.com/v1_1/dpjlvg7ql/image/upload",{method:"POST",body:i}).then((function(e){return e.json()})).then((function(e){var t=e.public_id;return console.log(t),t}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=7,Promise.all(r);case 7:l=e.sent,s(l),b(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(e){var t=e.images,a=e.setImages,s=function(e){e.persist();var s=Number(e.target.id);console.log("Image name: "+s);var n=t[s].name;a(t.filter((function(e){return e.name!==n})))};return Object(m.jsx)("div",{className:"tile is-ancestor",children:Object(m.jsx)("div",{className:"tile is-parent image-row",children:t&&t.map((function(e,t){return Object(m.jsxs)("div",{className:"tile is-child image-item",children:[Object(m.jsx)("span",{className:"is-small button is-inverted is-danger delete-image",title:"Remove",id:t,onClick:s,children:Object(m.jsx)("i",{className:"far fa-trash-alt"})}),Object(m.jsx)("img",{src:URL.createObjectURL(e),alt:"Could not load"})]},t)}))})})};return Object(m.jsxs)("form",{onSubmit:h,className:"form-container",children:[Object(m.jsx)("div",{className:"file is-centered is-boxed has-name",children:Object(m.jsxs)("label",{className:"file-label",children:[Object(m.jsx)("input",{className:"file-input",multiple:a,type:"file",name:"images",onChange:function(e){e.preventDefault();var t=e.target.files;O(a?function(e){return[].concat(Object(i.a)(e),Object(i.a)(t))}:Object(i.a)(t))}}),Object(m.jsxs)("span",{className:"file-cta",children:[Object(m.jsx)("span",{className:"file-icon",children:Object(m.jsx)("i",{className:"fas fa-images"})}),Object(m.jsx)("span",{className:"file-label",children:"Get images"})]})]})}),Object(m.jsxs)("div",{className:"buttons is-centered section",children:[Object(m.jsx)("button",{type:"submit",className:"button is-success",children:"Upload"}),Object(m.jsx)("button",{type:"submit",className:"button is-danger",onClick:function(e){e.preventDefault(),O([])},children:"Remove all"})]}),j?Object(m.jsx)("div",{children:"Loading..."}):Object(m.jsx)(g,{images:f,setImages:O})]})}},387:function(e,t,a){"use strict";a.r(t);var s=a(10),n=a.n(s),c=a(18),i=a(6),r=a(1),l=a(43),o=a.n(l),u=a(178),j=a(21),m=a.n(j),b=a(22),d=a(29),p=a(0);t.default=Object(d.a)(b.c)((function(e){var t=e.user,a=e.location.search,s=Object(r.useState)(o.a.parse(a).id),l=Object(i.a)(s,1)[0],j=Object(r.useState)(o.a.parse(a).name),b=Object(i.a)(j,1)[0],d=function(){var e=Object(c.a)(n.a.mark((function e(a){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.dir(a),e.next=3,m.a.post("/api/v1/images/locals/".concat(l,"/users/").concat(t.ownerID),{images:a}).then((function(e){console.log(e.status)})).catch((function(e){}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)("main",{id:"image-upload-page",className:"section content",children:Object(p.jsxs)("section",{className:"box section container",children:[Object(p.jsxs)("p",{className:"title",children:["Upload Images: ",b]}),Object(p.jsx)(u.b,{folder:"local",multiple:!0,callback:d})]})})}))}}]);
//# sourceMappingURL=12.20531a03.chunk.js.map