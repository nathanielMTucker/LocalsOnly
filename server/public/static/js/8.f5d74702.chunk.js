(this.webpackJsonplocalsonly=this.webpackJsonplocalsonly||[]).push([[8],{141:function(e,a,s){"use strict";s(1);var t=s(140),c=s(0);a.a=function(e){var a=e.id;return Object(c.jsx)(t.b,{publicId:a})}},159:function(e,a,s){"use strict";s.d(a,"a",(function(){return n}));s(1);var t=s(0),c=s(173),n=function(e){var a,s=e.rating,c=e.className,n=s-.5,r=!1;n===Math.floor(s)&&(r=!0),r?(a=4-n,s-=1):a=5-s;for(var i=[],l=0;l<s;l++)i.push("fas fa-star");r&&i.push("fas fa-star-half-alt");for(var o=0;o<a;o++)i.push("far fa-star");return Object(t.jsx)("div",{className:c,children:i.map((function(e,a){return Object(t.jsx)("i",{className:"".concat(e," has-text-success")},a)}))})};a.b=function(e){var a=e.loading,s=e.children,n=e.className;return Object(t.jsx)("div",{className:n,children:a?Object(t.jsxs)("div",{className:"loading has-text-centered",children:[Object(t.jsx)("div",{className:"animate__slower animate__animated animate__pulse animate__infinite",children:Object(t.jsx)("img",{alt:"LocalsOnly",src:c})}),Object(t.jsx)("p",{children:"Wait while we search"})]}):s})}},173:function(e,a,s){"use strict";s.r(a),a.default=s.p+"static/media/LocalsOnly.3121d9ef.png"},189:function(e,a,s){"use strict";var t=s(1),c=s(223),n=s(19),r=s(0),i={lat:33.421996,lng:-111.939935};a.a=Object(c.GoogleApiWrapper)({apiKey:n.b})((function(e){Object(t.useEffect)((function(){}),[]);var a=function(){var a=i;if(void 0!==e.markers&&void 0!==e.markers[0]&&null!==e.markers[0]&&void 0!==e.markers[0].lat)if(e.markers.length>1){var s=0,t=0;e.markers.forEach((function(e){s+=parseFloat(e.lat),t+=parseFloat(e.lng)})),s/=e.markers.length,t/=e.markers.length,a={lat:s,lng:t}}else 1===e.markers.length&&(a=e.markers[0]);return a};return Object(r.jsx)(c.Map,{google:e.google,zoom:e.zoom,initialCenter:a(),center:a(),containerStyle:e.style,style:{borderRadius:"6px"},children:function(){if(void 0!==e.markers&&void 0!==e.markers[0]&&null!==e.markers[0]&&void 0!==e.markers[0].lat){if(e.markers.length>1){var a=[];return e.markers.forEach((function(e,s){a.push(Object(r.jsx)(c.Marker,{position:{lat:e.lat,lng:e.lng}},s))})),a}return Object(r.jsx)(c.Marker,{position:{lat:e.markers[0].lat,lng:e.markers[0].lng}})}return Object(r.jsx)(c.Marker,{position:i})}()})}))},386:function(e,a,s){"use strict";s.r(a);var t=s(12),c=s.n(t),n=s(145),r=s(20),i=s(7),l=s(1),o=s(10),d=s(159),j=s(141),u=s(0),m=function(e){var a=function(){var a=e.price;return Object(n.a)(Array(a).keys()).map((function(e,a){return Object(u.jsx)("i",{className:"fas fa-dollar-sign has-text-success is-size-5"},a)}))};return Object(u.jsx)(o.b,{id:e.id,className:"box",to:"/local?id=".concat(e.id),children:Object(u.jsxs)("section",{className:"columns",children:[Object(u.jsx)("span",{className:"column is-4",children:Object(u.jsx)("figure",{className:"image",children:void 0===e.image?Object(u.jsx)("img",{src:"./LocalsOnly.png",alt:"LocalsOnly Logo"}):Object(u.jsx)(j.a,{id:e.image.url,preset:"local_images"})})}),Object(u.jsxs)("article",{className:"column",children:[Object(u.jsxs)("div",{className:"content",children:[Object(u.jsx)("h1",{children:e.name}),Object(u.jsxs)("div",{className:"level-left",children:[Object(u.jsx)(d.a,{className:"level-item",rating:e.rating}),Object(u.jsx)("div",{className:"level-item",children:"".concat(e.reviewCount," review").concat(1===e.reviewCount?"":"s")}),Object(u.jsx)("div",{className:"level-item",children:Object(u.jsx)(a,{})})]}),Object(u.jsx)("div",{children:e.hours.isClosed?Object(u.jsx)("p",{className:"has-text-danger",children:"closed"}):Object(u.jsxs)("p",{children:[Object(u.jsx)("span",{className:"has-text-success",children:"open"})," ",e.hours.from," - ",e.hours.to]})})]}),Object(u.jsx)("span",{className:"block",children:e.description})]})]})})},h=s(53),b=s.n(h),f=s(189),O=s(29),x=s(55),p=s(5),v=s(24),g=s.n(v),N=s(140),k=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];a.default=Object(x.a)(O.c,p.h)((function(e){var a=e.user,s=e.location.search,t=e.madeSearch,j=e.setMadeSearch,h=Object(l.useState)([]),O=Object(i.a)(h,2),x=O[0],p=O[1],v=Object(l.useState)(!0),y=Object(i.a)(v,2),w=y[0],_=y[1],C=Object(l.useState)(null),S=Object(i.a)(C,2),L=S[0],M=S[1],z=Object(l.useState)(10),E=Object(i.a)(z,1)[0],D=Object(l.useCallback)(Object(r.a)(c.a.mark((function e(){var a,t,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=b.a.parse(s),t=a.what,r=a.where,e.next=3,g.a.get("/api/v1/locals?".concat(t?"what=".concat(t):"","&where=").concat(r,"&limit=").concat(E).concat(L?"&offset=".concat(L):"")).then((function(e){var a=e.data,s=a.data,t=a.after;p((function(e){return[].concat(Object(n.a)(e),Object(n.a)(s))})),M(t)})).catch((function(e){console.error(e),p([{message:"Unable to connect"}])}));case 3:_(!1),j(!1);case 5:case"end":return e.stop()}}),e)}))),[E,L,s,j]);Object(l.useEffect)((function(){D()}),[D,t]);var W=function(){return Object(u.jsx)("div",{className:"mx-6 container is-centered",children:Object(u.jsxs)("div",{className:"notification is-info has-text-centered",children:[Object(u.jsx)("p",{className:"subtitle",children:"We could not find anything!"}),Object(u.jsxs)("p",{children:["You can help by adding new places to the database ",Object(u.jsx)(o.b,{className:"is-text is-focused",to:"/create-local",children:"here"}),"."]})]})})},A=function(){if(!x)return Object(u.jsx)(W,{});if(void 0!==x[0]&&x[0].message)return Object(u.jsx)("div",{children:Object(u.jsx)("p",{children:x[0].message})});var e=k[(new Date).getDay()],s=x.filter((function(e){return a.isLocalTo(e)})).map((function(a,s){var t=a.hours[e];return Object(u.jsx)(m,{i:s,id:a._id,name:a.name,description:a.description,rating:a.rating,reviewCount:a.reviewCount,hours:t,address:a.address,image:a.images.data[0],price:a.price},s)}));return s.length<=0?Object(u.jsx)(W,{}):s};return Object(u.jsx)("main",{className:"",id:"results-page",children:Object(u.jsxs)("div",{className:"columns pt-4",children:[Object(u.jsxs)(d.b,{className:" is-two-fifths column side result-card",loading:w,children:[Object(u.jsx)(N.a,{cloudName:"dpjlvg7ql",secure:!1,upload_preset:"local_images",children:x&&Object(u.jsx)(A,{})}),L?Object(u.jsx)("div",{className:"text-has-line my-5 is-clickable",onClick:function(e){e.preventDefault(),console.log(e),D()},children:Object(u.jsx)("span",{children:"show more"})}):x?Object(u.jsx)("div",{className:"my-5 container is-centered",children:Object(u.jsxs)("div",{className:"notification is-info has-text-centered",children:[Object(u.jsx)("p",{className:"subtitle",children:"This is all we could find!"}),Object(u.jsxs)("p",{children:["You can help by adding new places to the database ",Object(u.jsx)(o.b,{className:"is-text is-focused",to:"/create-local",children:"here"}),"."]})]})}):null]}),Object(u.jsx)("div",{className:"column is-medium is-hidden-mobile",children:x&&Object(u.jsx)(f.a,{style:{height:"89vh",width:"58.5vw"},zoom:16,markers:x.map((function(e){return e.geo}))})})]})})}))}}]);
//# sourceMappingURL=8.f5d74702.chunk.js.map