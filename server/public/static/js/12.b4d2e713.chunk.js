(this.webpackJsonplocalsonly=this.webpackJsonplocalsonly||[]).push([[12],{116:function(e,t,a){"use strict";a(1);var n=a(115),s=a(0);t.a=function(e){var t=e.id;return Object(s.jsx)(n.b,{publicId:t})}},121:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(34);var s=a(43);function c(e){return function(e){if(Array.isArray(e))return Object(n.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(s.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},177:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var n=a(10),s=a.n(n),c=a(18),i=a(121),r=a(6),l=a(1),o=a(116),u=a(115),m=a(22),j=a(0),b=Object(m.c)((function(e){var t=e.user,a=e.setImage,n=e.image,s=function(e){e.images,e.setImages;return Object(j.jsxs)("div",{className:"tile is-child image-item",children:[Object(j.jsx)("span",{className:"is-small button is-inverted is-danger delete-image",title:"Remove",onClick:function(e){a(null)},children:Object(j.jsx)("i",{className:"far fa-trash-alt"})}),Object(j.jsx)("img",{src:URL.createObjectURL(n),alt:"Could not load"})]})};return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{className:"file is-centered is-boxed has-name",children:Object(j.jsxs)("label",{className:"file-label",children:[Object(j.jsx)("input",{className:"file-input",src:"./LocalsOnly.png",type:"file",name:"images",onChange:function(e){e.preventDefault();var t=e.target.files;console.dir(t[0]),a(t[0])}}),Object(j.jsx)("span",{className:"image is-128x128",children:null===t.avatar?Object(j.jsx)("img",{src:"https://bulma.io/images/placeholders/128x128.png",alt:"User"}):Object(j.jsx)(u.a,{cloudName:"dpjlvg7ql",secure:!1,upload_preset:"avatar_images",children:Object(j.jsx)(o.a,{id:t.avatar,preset:"avatar_images"})})})]})}),n&&Object(j.jsx)(s,{})]})}));t.b=function(e){var t=e.folder,a=e.multiple,n=e.callback,o=Object(l.useState)(!1),u=Object(r.a)(o,2),m=u[0],b=u[1],d=Object(l.useState)([]),f=Object(r.a)(d,2),p=f[0],O=f[1],h=function(){var e=Object(c.a)(s.a.mark((function e(a){var i,r,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),console.log(p),i=new FormData,b(!0),r=p.map(function(){var e=Object(c.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.append("file",a),i.append("upload_preset","".concat(t,"_images")),e.next=4,fetch("https://api.cloudinary.com/v1_1/dpjlvg7ql/image/upload",{method:"POST",body:i}).then((function(e){return e.json()})).then((function(e){var t=e.public_id;return console.log(t),t}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=7,Promise.all(r);case 7:l=e.sent,n(l),b(!1);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(e){var t=e.images,a=e.setImages,n=function(e){e.persist();var n=Number(e.target.id);console.log("Image name: "+n);var s=t[n].name;a(t.filter((function(e){return e.name!==s})))};return Object(j.jsx)("div",{className:"tile is-ancestor",children:Object(j.jsx)("div",{className:"tile is-parent image-row",children:t&&t.map((function(e,t){return Object(j.jsxs)("div",{className:"tile is-child image-item",children:[Object(j.jsx)("span",{className:"is-small button is-inverted is-danger delete-image",title:"Remove",id:t,onClick:n,children:Object(j.jsx)("i",{className:"far fa-trash-alt"})}),Object(j.jsx)("img",{src:URL.createObjectURL(e),alt:"Could not load"})]},t)}))})})};return Object(j.jsxs)("form",{onSubmit:h,className:"form-container",children:[Object(j.jsx)("div",{className:"file is-centered is-boxed has-name",children:Object(j.jsxs)("label",{className:"file-label",children:[Object(j.jsx)("input",{className:"file-input",multiple:a,type:"file",name:"images",onChange:function(e){e.preventDefault();var t=e.target.files;O(a?function(e){return[].concat(Object(i.a)(e),Object(i.a)(t))}:Object(i.a)(t))}}),Object(j.jsxs)("span",{className:"file-cta",children:[Object(j.jsx)("span",{className:"file-icon",children:Object(j.jsx)("i",{className:"fas fa-images"})}),Object(j.jsx)("span",{className:"file-label",children:"Get images"})]})]})}),Object(j.jsxs)("div",{className:"buttons is-centered section",children:[Object(j.jsx)("button",{type:"submit",className:"button is-success",children:"Upload"}),Object(j.jsx)("button",{type:"submit",className:"button is-danger",onClick:function(e){e.preventDefault(),O([])},children:"Remove all"})]}),m?Object(j.jsx)("div",{children:"Loading..."}):Object(j.jsx)(v,{images:p,setImages:O})]})}},386:function(e,t,a){"use strict";a.r(t);var n=a(10),s=a.n(n),c=a(18),i=a(6),r=a(1),l=a(44),o=a.n(l),u=a(177),m=a(21),j=a.n(m),b=a(22),d=a(29),f=a(0);t.default=Object(d.a)(b.c)((function(e){var t=e.user,a=e.location.search,n=Object(r.useState)(o.a.parse(a).id),l=Object(i.a)(n,1)[0],m=Object(r.useState)(o.a.parse(a).name),b=Object(i.a)(m,1)[0],d=function(){var e=Object(c.a)(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.dir(a),e.next=3,j.a.post("/api/v1/images/locals/".concat(l,"/users/").concat(t.ownerID),{images:a}).then((function(e){console.log(e.status)})).catch((function(e){}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)("main",{id:"image-upload-page",className:"section content",children:Object(f.jsxs)("section",{className:"box section container",children:[Object(f.jsxs)("p",{className:"title",children:["Upload Images: ",b]}),Object(f.jsx)(u.b,{folder:"local",multiple:!0,callback:d})]})})}))}}]);
//# sourceMappingURL=12.b4d2e713.chunk.js.map