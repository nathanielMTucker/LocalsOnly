{"version":3,"sources":["Components/Alert.jsx","Pages/Registration.jsx"],"names":["Alert","text","severity","React","useState","anchorEl","setAnchorEl","handleClick","event","currentTarget","open","Boolean","id","undefined","className","aria-describedby","type","onClick","Popper","placement","transition","TransitionProps","Fade","timeout","variant","action","IconButton","aria-label","size","fontSize","getCities","require","Registration","compose","withRouter","withFirebase","firebase","history","isCity","state","city","includes","document","getElementById","classList","remove","add","setVerAddress","local","setLocal","name","email","emailChanged","passwordOne","passwordTwo","error","user","setUser","verAddress","verPass","setVerPass","birthday","abortController","AbortController","signal","useEffect","abort","src","alt","onSubmit","e","preventDefault","createUserWithEmailAndPassword","then","uid","axios","post","authID","localTo","getAbbrs","toLowerCase","replace","signInWithEmailAndPassword","push","window","location","reload","alert","catch","err","console","code","message","SignUp","setStatus","value","onChange","target","STATES","map","placeholder","split","c","charAt","toUpperCase","substring","join","disabled","to"],"mappings":"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","file":"static/js/15.dfb944e2.chunk.js","sourcesContent":["import React from 'react';\r\n// import { makeStyles } from '@material-ui/core/styles';\r\nimport Popper from '@material-ui/core/Popper';\r\nimport Fade from '@material-ui/core/Fade';\r\nimport AlertMaterial from '@material-ui/lab/Alert';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\n// const useStyles = makeStyles((theme) => ({\r\n//   paper: {\r\n//     border: '1px solid',\r\n//     padding: theme.spacing(1),\r\n//     backgroundColor: theme.palette.background.paper,\r\n//   },\r\n// }));\r\n\r\nconst Alert = ({text, severity})=>{\r\n  // const classes = useStyles();\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(anchorEl ? null : event.currentTarget);\r\n  };\r\n\r\n  const open = Boolean(anchorEl);\r\n  const id = open ? 'transitions-popper' : undefined;\r\n\r\n  return (\r\n    <div className=\"pl-1\">\r\n      <button aria-describedby={id} type=\"button\" className={`button icon is-rounded px-0 is-inverted is-${severity}`} onClick={handleClick}>\r\n      {open ? \r\n          <i className=\"far fa-times-circle py-0 px-0\"></i>:\r\n          <i className=\"far fa-question-circle py-0 px-0 my-0 mx-0\"></i>\r\n        }\r\n      </button>\r\n      <Popper id={id} open={open} anchorEl={anchorEl} placement={'right'} transition>\r\n        {({ TransitionProps }) => (\r\n          <Fade {...TransitionProps} timeout={350}>\r\n            <div >\r\n            <AlertMaterial\r\n              variant=\"filled\"\r\n              severity={severity}\r\n              action={\r\n                <IconButton\r\n                  aria-label=\"close\"\r\n                  size=\"small\"\r\n                  onClick={handleClick}\r\n                >\r\n                  <CloseIcon fontSize=\"inherit\" />\r\n                </IconButton>\r\n              }\r\n            >\r\n              {text}\r\n            </AlertMaterial>\r\n            </div>\r\n          </Fade>\r\n        )}\r\n      </Popper>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Alert;","import React, { useState } from 'react'\r\nimport SignUp from '../Components/SignUp';\r\nimport {withRouter, Link} from 'react-router-dom';\r\nimport {compose} from 'recompose';\r\nimport {STATES} from '../globals';\r\nimport {getAbbrs} from '../globals';\r\nimport { withFirebase } from '../Authentication';\r\nimport axios from 'axios';\r\nimport Alert from '../Components/Alert';\r\n\r\nconst getCities = require('countrycitystatejson').getCities\r\n\r\nconst RegistrationBase = ({firebase, history})=>{\r\n    const isCity = (state, city)=>{\r\n        const isCity = getCities('US', state).includes(city)\r\n        if(isCity){\r\n            document.getElementById(\"city-input\").classList.remove('is-danger');\r\n            document.getElementById(\"city-input\").classList.add('is-success');\r\n            setVerAddress(true);\r\n        }else{\r\n            document.getElementById(\"city-input\").classList.remove('is-success');\r\n            document.getElementById(\"city-input\").classList.add('is-danger');\r\n            setVerAddress(false);\r\n        }\r\n    }\r\n    const setCity = e=>{\r\n        e.preventDefault(); \r\n        let city = e.target.value;\r\n        city = city.toLowerCase().split(' ').map(c=>c.charAt(0).toUpperCase() + c.substring(1)).join(' ');\r\n        \r\n        isCity(local.state, city)\r\n       \r\n        setLocal({...local, city:e.target.value}); \r\n    }\r\n    const setState = e=>{ \r\n        e.preventDefault(); \r\n        isCity(e.target.value, local.city)\r\n        setLocal({...local, state:e.target.value}); \r\n    }\r\n    \r\n    \r\n    let [local, setLocal] = useState({\r\n        city:'',\r\n        state:'Alabama',\r\n    })\r\n    \r\n    let [user, setUser] = useState({\r\n        name: '',\r\n        email: '',\r\n        emailChanged: '',\r\n        passwordOne: '',\r\n        passwordTwo: '',\r\n        error: null,\r\n    })\r\n\r\n   \r\n    let [verAddress, setVerAddress] = useState(false);\r\n    let [verPass, setVerPass] = useState(false);\r\n    \r\n\r\n    const [birthday, setBirthday] = useState({});\r\n\r\n    const abortController = new AbortController();\r\n    const signal = abortController.signal;\r\n\r\n    React.useEffect(()=>{\r\n        \r\n        \r\n        return function cleanup(){\r\n            abortController.abort();\r\n        }\r\n    })\r\n    \r\n    const handleSubmit = e => {\r\n        e.preventDefault();\r\n        \r\n        firebase.createUserWithEmailAndPassword(user.email, user.passwordOne, {signal: signal})\r\n        .then( ({user : {uid}}) => {\r\n            \r\n            axios.post(`/api/v1/users`,{\r\n                authID: uid,\r\n                email:user.email,\r\n                name: user.name,\r\n                localTo: `${getAbbrs(local.state)}:${local.city.toLowerCase().replace(' ', '_')}`,\r\n                birthday : birthday\r\n            })\r\n            \r\n            .then(()=>{\r\n                firebase.signInWithEmailAndPassword(user.email, user.passwordOne)\r\n                .then(\r\n                    ()=>{\r\n                        history.push('/')\r\n                        window.location.reload(); \r\n                        alert(\"Thank you for signing up!\")\r\n                    }\r\n                );\r\n            })\r\n            .catch(err => console.error(err))\r\n\r\n        })\r\n        .catch(\r\n            err => {\r\n                const m = err.code;\r\n                switch (m){\r\n                    case \"auth/email-already-in-use\":\r\n                        alert(err.message)\r\n                        break\r\n                    default:\r\n                        console.error(err);\r\n                        break                        \r\n                }\r\n            }\r\n        )\r\n        \r\n        \r\n    }\r\n    const stateOptions=()=>{\r\n        return STATES.map(state=>\r\n            <option key={state} value={state}>{state}</option>\r\n        )\r\n\r\n    }\r\n    const isDisabled = () => {\r\n        \r\n        return !(verPass && verAddress);\r\n    }\r\n    return (\r\n    <main className=\"registration section\">\r\n        <div className=\"columns is-centered\">\r\n            <div className=\"is-half\">\r\n                <div className=\"box border-main\">\r\n                    <div className=\"hero py-6 my-0 px-5 mx-0 is-primary\">\r\n                        <div className=\"text-center level home-logo\">\r\n                        <img src=\"../LocalsOnly.png\" alt=\"localsonly\"/>\r\n                            <label className=\"level-item title\">Registration</label>\r\n                        </div>\r\n                    </div>\r\n                    <section className=\"column\">\r\n                        <form onSubmit={handleSubmit} className=\"form\">\r\n                        <label className=\"label\">\r\n                            <SignUp setUser={setUser} setStatus={setVerPass} user={user}/>\r\n                        </label>\r\n                        <label className=\"label\">\r\n                            <div className=\"is-mobile\">\r\n                                <div className=\"level-left\">\r\n                                    <div className=\"level-item\">\r\n                                        Local\r\n                                        <Alert text=\"Changing Local will result in a 30 day waiting period\" severity=\"info\"/>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"columns\">\r\n                                <div className=\"column\">\r\n                                    <div className=\"select\">\r\n                                        <select name=\"state\" id=\"state\" value={local.state} onChange={setState}>\r\n                                            {stateOptions()}\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"column\">\r\n                                    <input id=\"city-input\" type=\"text\" placeholder=\"City/Town\" className=\"input\" name=\"city\" value={local.city} onChange={setCity}/>\r\n                                </div>\r\n                            </div>\r\n                        </label>\r\n                        <div className=\"level\">\r\n                            <div className=\"level-left\">\r\n                            <button id=\"sign-up-button\" className=\"level-item button is-primary\" disabled={isDisabled()} type=\"submit\">Sign Up</button>\r\n                            </div>\r\n                        <small className=\"help is-info\">* All fields are required</small>\r\n                        </div>\r\n                        </form>\r\n                    </section>\r\n                    <small className=\"content has-text-centered section\">Already have an account? <Link className=\"has-text-primary\" to=\"/\">Login!</Link></small>\r\n                </div>\r\n                <div className=\"my-0 py-0 section content has-text-centered\">By signing up you accept all cookies, <Link>terms of services</Link> and <Link>privacy policy</Link></div>\r\n            </div>\r\n        </div>\r\n    </main>\r\n    )\r\n}\r\nconst Registration = compose(withRouter, withFirebase)(RegistrationBase);\r\nexport default Registration;\r\n"],"sourceRoot":""}